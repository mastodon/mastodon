@use 'base';
@use 'dark';
@use 'light';

html {
  @include base.palette;

  &[data-user-theme='system'] {
    color-scheme: dark light;

    @media (prefers-color-scheme: dark) {
      color-scheme: dark;

      @include dark.tokens;

      @media (prefers-contrast: more) {
        @include dark.contrast-overrides;
      }
    }

    @media (prefers-color-scheme: light) {
      color-scheme: light;

      @include light.tokens;

      @media (prefers-contrast: more) {
        @include light.contrast-overrides;
      }
    }
  }
}

.theme-dark,
html:not([data-user-theme='mastodon-light'], [data-user-theme='system']) {
  color-scheme: dark;

  @include dark.tokens;
}

html[data-user-theme='contrast'] {
  @include dark.contrast-overrides;
}

.theme-light,
html[data-user-theme='mastodon-light'] {
  color-scheme: light;

  @include light.tokens;
}
